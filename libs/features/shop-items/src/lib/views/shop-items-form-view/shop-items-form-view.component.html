<ib-container height="max-height" mode="flex">
  <header>
    @if (vm.isNew) {
      <h3 class="title quick-preview-section-title">Нова страва</h3>
    } @else {
      <h3 class="title quick-preview-section-title">Товар № {{ vm.formValue.id }}</h3>
    }
  </header>

  <form scVestForm
        (ngSubmit)="onSubmit()"
        [formValue]="vm.formValue"
        [validateRootForm]="true"
        [formShape]="shape"
        [suite]="suite"
        [validationConfig]="validationConfig"
        (validChange)="formValid.set($event || false)"
        (errorsChange)="errors.set($event)">

    <ib-row ibWeb ibTablet ibHandset>
      <ib-column ibWeb ibTablet ibHandset>
        <h4 class="title quick-preview-section-title">Загальна інформація</h4>
      </ib-column>
    </ib-row>

    <ib-row ibWeb ibTablet ibHandset>
      <ib-column ibWeb="3" ibTablet="3" ibHandset="3">
        <mat-form-field ibFullWidth>
          <mat-label>Ім'я</mat-label>
          <input matInput [(ngModel)]="vm.formValue.name" name="name" type="text">
          <mat-error>{{ vm.errors['name'] || '' }}</mat-error>
        </mat-form-field>
      </ib-column>

      <ib-column ibWeb="3" ibTablet="3" ibHandset="3">
        <mat-form-field ibFullWidth>
          <mat-label>Опис</mat-label>
          <input matInput [(ngModel)]="vm.formValue.description" name="description" type="text">
          <mat-error>{{ vm.errors['description'] || '' }}</mat-error>
        </mat-form-field>
      </ib-column>

      <ib-column ibWeb="3" ibTablet="3" ibHandset="3">
        <mat-form-field ibFullWidth>
          <mat-label>Ціна</mat-label>
          <input matInput [(ngModel)]="vm.formValue.price" name="price" type="text">
          <mat-error>{{ vm.errors['price'] || '' }}</mat-error>
        </mat-form-field>
      </ib-column>
    </ib-row>


    <ib-row ibWeb ibTablet ibHandset>
      <ib-column ibWeb="3" ibTablet="3" ibHandset="3">
        <mat-form-field ibFullWidth>
          <mat-label>Стан</mat-label>
          <mat-select
            [(ngModel)]="vm.formValue.state" name="state">
            @for (item of datasources.states(); track item.id) {
              <mat-option [value]="item.id">{{ item.name }}</mat-option>
            }
          </mat-select>
          <mat-error>{{ vm.errors['state'] || '' }}</mat-error>
        </mat-form-field>
      </ib-column>

      <ib-column ibWeb="3" ibTablet="3" ibHandset="3">
        <mat-form-field ibFullWidth>
          <mat-label>Категорія</mat-label>
          <mat-select
            [(ngModel)]="vm.formValue.categoryId" name="categoryId">
            @for (item of datasources.categories(); track item.id) {
              <mat-option [value]="item.id">{{ item.name }}</mat-option>
            }
          </mat-select>
          <mat-error>{{ vm.errors['categoryId'] || '' }}</mat-error>
        </mat-form-field>
      </ib-column>
    </ib-row>


    <ib-row class="actions" ibWeb ibTablet ibHandset>
      <ib-column ibWeb="2" ibTablet="3" ibHandset="6">
        <button mat-button (click)="onCancelClick()" type="button">Скасувати</button>
      </ib-column>
      <ib-column ibWeb="2" ibTablet="3" ibHandset="6">
        <button mat-stroked-button color="primary" type="submit">Зберігти</button>
      </ib-column>
    </ib-row>


  </form>

  <header>
    @if (vm.isNew) {
      <h3 class="title quick-preview-section-title">Нова страва</h3>
    } @else {
      <h3 class="title quick-preview-section-title">Товар № {{ vm.formValue.id }}</h3>
    }
  </header>

</ib-container>
